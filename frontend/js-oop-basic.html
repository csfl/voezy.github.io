<!DOCTYPE html>
<html>
    <!-- Head -->
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="author" content="voezy">
    <meta name="description" itemprop="description" content="">
    <meta name="keywords" content="wind,lonezj">

    <!-- Page Title -->
    
        <title>js面向对象及继承 | Voezy</title>
    
    <link rel="icon" href="/img/avatar.png">
    <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    
    <script src="/js/script.js"></script>
    <link rel="stylesheet" href="/css/style.css">
    
        <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-115976686-1', 'auto');ga('send', 'pageview');
</script>
    
    <style>
        .deactiveColor{
            color: #37474f;
        }
        .activeColor{
            color: #006064;
        }
        a:hover{
            color: #006064;
        }
        .header-btn{
            color: #37474f;
        }
        
        .post-content img{
            margin: 50px auto;
        }
        
    </style>
</head>
    <body>
        <div class="container">

            <!-- Top Anchor -->
            <div id="top"></div>

            <!-- Header -->
            <header class="header-wrapper">
    <div class="header-title-wrapper">
        <!-- Page Title -->
        <p class="header-title">
             
                
                    js面向对象及继承
                
            
        </p>  
    </div>    

    
        <!-- Division Line -->
        <div class="division"></div> 
    
    
    <div class="header-detail">
        <!-- Header Button -->
        <div class="header-btn-wrapper">
            
                <span>
                    <a class="home-btn header-btn" href="/" title="homepage"><i class="fa fa-home"></i></a>
                </span>

                
                    <span>
                        <a class="catalog-btn header-btn"><i class="fa fa-list-ul"></i></a>
                    </span>
                
            
        </div>
    </div>
</header>

            <!-- Main -->
            <main>
                <article class="post-wrapper">
    

    
        <!-- Article Catalog -->
        <div class="catalog-dropdown col-xs-12 col-sm-12">
            <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#面向对象"><span class="toc-number">1.</span> <span class="toc-text">面向对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#继承"><span class="toc-number">2.</span> <span class="toc-text">继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JavaScript实现继承"><span class="toc-number">3.</span> <span class="toc-text">JavaScript实现继承</span></a></li></ol>
        </div>
    

    
        <!--For now, Lightbox Only Show in Post Layout -->
        

        
        
    

    

    <!-- Article Content -->
    <div class="post-content">
        <h3 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h3><p>首先，是理解面向对象(OOP)的概念。 一种将程序分解为封装数据及相关操作的模块的编程方式。<a href="https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1" target="_blank" rel="noopener">维基百科-面向对象程序设计</a>    </p>
<p>然后，理解面向对象的诸多编程方式中，基于类 和 基于原型这两种不同的实现方式。    </p>
<p>区别：</p>
<p>基于类: 首先是基于结构和行为，而后是状态。关注如何分类, 还有类之间关系。    </p>
<p>基于原型: 提倡运行时原型的修改。关注一系列对象实例的行为，而之后才关心如何将这些对象划分到最近的使用方式相似的原型对象，而不是分成类。    </p>
<p><a href="https://zh.wikipedia.org/wiki/%E5%8E%9F%E5%9E%8B%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88" target="_blank" rel="noopener">维基百科-基于原型的编程</a>    </p>
<hr>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>继承是面向对象编程的一个重要功能，它可以减少重复编码，在不增加重复代码的情况下利用已有的资源(属性和函数等)，或者进行扩展。    </p>
<p>无论是基于原型还是基于类，都可以实现继承。    </p>
<p><a href="https://zhuanlan.zhihu.com/p/35309555" target="_blank" rel="noopener">知乎专栏-我为什么一定要学 prototype?</a>    </p>
<p>基于类的设计模式中，合理的分类非常重要，后期对类的关系调整会比较困难。<br>基于原型的实现方法，会在类的关系处理(继承)方面比较自由。（js是classless的，这里类的关系其实是对象之间的关系）</p>
<p>但是，开发过程中对象关系的轻易变更可能会使继承链变得混乱，显然不是我们想要的结果。（比如 <a href="https://www.zhihu.com/question/270890846/answer/357463316" target="_blank" rel="noopener">https://www.zhihu.com/question/270890846/answer/357463316</a> 中提到的误改基类数据）    </p>
<p>所以，原型只是给了我们另一种实现面向对象、实现继承的思路，至于用不用，什么时候用，都是由实际情况决定的。    </p>
<p>而用基于类的思想去进行编程，可以使我们的代码更规范，是值得提倡的。    </p>
<hr>
<h3 id="JavaScript实现继承"><a href="#JavaScript实现继承" class="headerlink" title="JavaScript实现继承"></a>JavaScript实现继承</h3><p>参考：<a href="https://www.cnblogs.com/zmhaki/p/3146228.html" target="_blank" rel="noopener">JavaScript中的类式继承和原型式继承</a>     </p>
<p>1、类式继承    </p>
<p>学过Java等基于类实现面向对象编程的语言，应该都有一点感想，就是这种继承有几个特点，首先是子类会继承父类的属性(调用父类构造函数进行初始化)，然后还会继承父类的方法。     </p>
<p>这种类式继承的方法应该就是《JavaScript语言精粹》第五章 ‘继承’ 中提到的伪类。    </p>
<p>JavaScript中实现类式继承的办法似乎也有不少。    </p>
<p>（1）第一种<br>（虽然过程中用到了prototype，没有用到class关键字，但这的确是类式继承的js实现）    </p>
<pre><code class="JavaScript">// 父类构造函数
function Parent (name) {
  this.name = name;
  this.gender = &quot;male&quot;;
}

// 定义父类方法
Parent.prototype.getName = function() {
  console.log(this.name);
}

Parent.prototype.show =   function() {
  console.log(‘I am here’);
}

// 子类构造函数
function Child (name, age) {
  this.age = age;
  // 调用父类构造函数，初始化name和gender
  Parent.call(this, name)
}

// 继承父类方法
Child.prototype = new Parent();  // 继承了父类方法，但是这样会使constructor 指向父类的constructor
Child.prototype.constructor = Child;  // 所以要把constructor 重新指向Child自己的构造函数，这样才能初始化属于子类自己的属性
</code></pre>
<p>然后就ok了，     </p>
<pre><code>var jim = new Child(‘Jim’, 12)
</code></pre><p>可以得到一个子类实例，它拥有父类的所有属性和方法，而且也拥有自己的属性。</p>
<p>（2）第二种    </p>
<p>上面的代码一路下来，思路是挺清晰的，不过，为了更好地实现继承，可以将这种套路放到一个函数中，实现模块化，便于重用。所以，第二种其实是第一种的变种，优化升级版。    </p>
<pre><code class="JavaScript">// 父类构造函数
function Parent (name) {
  this.name = name;
  this.gender = &quot;male&quot;;
}

// 定义父类方法
Parent.prototype.getName = function() {
  console.log(this.name);
}

Parent.prototype.show =   function() {
  console.log(&#39;I am here&#39;);
}

// 子类构造函数
function Child (name, age) {
  this.age = age;
  // 调用父类构造函数，初始化name和gender
  Child.superclass.constructor.call(this, name);
}

function extend (subClass, superClass) {
  // F只是一个中介
  var F = function () {};
  F.prototype = superClass.prototype;

  subClass.prototype = new F();
  subClass.prototype.constructor = subClass;

  // 给子类添加一个属性superclass，用于记录父类名，
  // 并且可以在子类构造函数中用以调用父类构造函数。
  // 且不必将父类名写死，方便改变继承关系，对比这版和(1)中的子类构造函数就懂了
  subClass.superclass = superClass.prototype;  // 这里用的是父类的原型。直接改用父类名，然后修改一下子类对父类的调用，似乎也行。

  // 再次检查子类的constructor。如果没有子类构造函数，那么将constructo指向父类构造函数
  if(subClass.prototype.constructor == Object.prototype.constructor) {
    subClass.prototype.constructor = superClass
  }
}

// 设置Child继承于Parent
extend(Child, Parent)

// 将得到一个子类Child的实例对象jim，
// 它拥有了父类的方法，且调用了父类的构造函数初始化了一些属性。而且它还具有自己特有的属性。
var jim = new Child(‘Jim’, 12)
</code></pre>
<p>注意先调用extends设置子类要继承的父类，以免出错。     </p>
<p>这种放之所以在extend中利用了一个空函数F作为中介，是为了 “绕开父类构造器的调用，并将它的调用时机延迟到子类实例化的时候”。也就是出于对性能的考虑做的。    </p>
<hr>
<p>2、原型式继承</p>
<p>就是类似于    </p>
<pre><code class="JavaScript">if (typeof Object.create!== &#39;function&#39;) {
    Object.create= function(o) {
        var f = function() {};
        f.prototype = o;
        return new f();
    };
}

var par = {}
var son = Object.create(par)
</code></pre>
<p>这样子，将会基于par对象，创建一个son对象。son对象其实是一个空对象，只不过它通过原型链连接到了par对象上，所以son对象可以共享par对象所有属性和方法。    </p>
<p>但是要注意的是，如果par的某个属性是一个引用值(比如对象、数组)，那么在继承对象中对这个属性某些值的修改，将会直接修改原型对象，从而对整个原型链造成影响。所以这是一个特别需要注意的地方。    </p>
<p>而如果通过son设定了一个同名非引用属性，那么原型不会被修改，son对象将会新增一个属于自己的属性，不会再到原型链上找这个属性(即”属性遮蔽 ,property shadowing”)。由于具有了自己的属性，往后也就不会再顺着原型链找这个属性了。    </p>
<p>有个评论值得注意：属性之类的写在构造器中，调用方法写在原型中。<br>参考：<a href="https://75team.com/post/inherits.html" target="_blank" rel="noopener">从本质认识JavaScript的原型继承和类继承</a>    </p>
<p>es5中，新增了一个函数Object.create()实现了原型式继承。    </p>
<hr>
<p>知乎上的一些看法：<br>可以用freeze来保护原型。所以原型继承的组合拳是 Object.create()和Object.freeze()。<br>原型继承的原则：原型放共享的方法，对象实例持有数据。<br>也就是被继承对象不再存放数据了，只存放方法。    </p>
<p>MDN中有比较多的解释：<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain" target="_blank" rel="noopener">继承与原型链</a></p>
  
    </div> 

    
        <!-- Division Line -->
        <div class="division"></div> 
    

    <div class="post-info-wrapper">
            
                    <!-- Post Info -->
                    <p class="post-date">2018-03-01</p>
                    
                    
                        <p class="post-info-categories">
                            <a class="post-category-link" href="/categories/frontend/">frontend</a>
                        </p>
                    

                    
            
    </div>
</article>


    
    <!-- Comments -->
    <div class="post-comment-wrapper">
        
    <!-- Livere -->
    <div id="lv-container" data-id="city" data-uid="MTAyMC8zMjA4Mi84NjQ2">
        <script type="text/javascript">
       (function(d, s) {
           var j, e = d.getElementsByTagName(s)[0];
    
           if (typeof LivereTower === 'function') { return; }
    
           j = d.createElement(s);
           j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
           j.async = true;
    
           e.parentNode.insertBefore(j, e);
       })(document, 'script');
        </script>
    <noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
    </div>

    </div>
    

            </main>

            <!-- 'To Top' Btn-->
            
                <div id="to-top">
    <a href="#top" class="toTop">
        <i class="fa fa-pagelines"></i>
    </a>
</div>
            

            <!-- Footer -->
            
                <footer class="footer-wrapper col-xs-12 col-sm-12">
    <div class="footer-banner-wrapper">
        <p class="footer-banner">Powered by <a href="https://hexo.io/" title="Hexo">Hexo</a></p>
        <P class="footer-banner">Theme <a href="https://github.com/Lonezj/hexo-theme-wind" title="Wind">wind</a></P>
    </div>
</footer>
            
        </div>

        <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css">
        <link rel="stylesheet" href="/css/google-prettify-monokai.css" type="text/css">
        <script src="//cdn.bootcss.com/prettify/r298/prettify.min.js" type="text/javascript"></script>
    </body>
</html>